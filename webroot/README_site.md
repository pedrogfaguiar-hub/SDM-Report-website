# Web Repository - Hoopie Dark Theme

Modern web interface with dark theme inspired by the Hoopie logo. Displays PowerPoint reports and interactive incident maps generated by AGENTE_D.

## ðŸŽ¨ Design

- **Background**: Nearly black (#050a0f)
- **Green Primary**: #10b981 (borders, buttons, accents)
- **Cyan Accent**: #22d3ee (secondary elements)
- **Effects**: Gradients, hover animations

## ðŸš€ How to Serve

### Recommended: Python HTTP Server
```bash
cd webroot
python -m http.server 8001
```

Open: **http://localhost:8001**

> **Note**: Port 8001 is used to avoid conflicts with mapa_incidentes (port 8000)

### Option 2: Node.js
```bash
npm install -g http-server
cd webroot
http-server -p 3000
```

### Option 3: PHP
```bash
cd webroot
php -S localhost:3000
```

## ðŸ“ Structure

```
webroot/
â”œâ”€â”€ index.html                      # Main interface
â”œâ”€â”€ assets/
â”‚   â”œâ”€â”€ Hoopie-Logo_RGB_1-03.png    # Logo (shown in header)
â”‚   â”œâ”€â”€ style.css                   # Complete dark theme
â”‚   â””â”€â”€ script.js                   # Dynamic logic
â”œâ”€â”€ data/
â”‚   â””â”€â”€ registry.json               # Reports database
â”œâ”€â”€ reports/                        # PowerPoint presentations (.pptx)
â””â”€â”€ maps/                           # Interactive incident maps (HTML + assets)
    â”œâ”€â”€ index.html                  # Map HTML
    â”œâ”€â”€ styles.css                  # Map styles
    â”œâ”€â”€ app.js                      # Map logic
    â””â”€â”€ backend/
        â””â”€â”€ incidents_data.json     # Map data
```

> **Important**: Maps are **self-contained** with all assets (HTML, CSS, JS, JSON). Each map has its own complete copy of files to preserve historical data.

## âœ¨ Features

- âœ… Dynamic card loading via `registry.json`
- âœ… Real-time search (title/summary)
- âœ… Sorting by date or title
- âœ… Auto-refresh every 30 seconds
- âœ… "New" badge for recent reports (<24h)
- âœ… Hover animations with effects
- âœ… 100% responsive design
- âœ… Custom scrollbar with green-cyan gradient

## ðŸ“ registry.json Format

```json
{
  "entries": [
    {
      "title": "Report Title",
      "summary": "Brief content description",
      "timestamp": "2025-01-15T14:30:00Z",
      "ppt_path": "reports/report.pptx",
      "map_path": "maps/map.html"
    }
  ]
}
```

## ðŸ¤– How Reports are Added (Automated)

Reports are **automatically added** by AGENTE_D using the `update_registry_direct` tool:

1. **AGENTE_D generates report**: Creates PowerPoint and incident map
2. **Tool copies files**:
   - PowerPoint â†’ `reports/`
   - Map HTML + assets â†’ `maps/` (includes CSS, JS, JSON)
3. **Tool updates registry**: Adds entry to `data/registry.json`
4. **Frontend auto-refresh**: Website detects changes within 30 seconds

### Manual Addition (if needed)

Edit `data/registry.json` and add a new entry to the `entries` array:

```json
{
  "title": "Report Title",
  "summary": "Brief description",
  "timestamp": "2025-12-02T12:00:00Z",
  "ppt_path": "reports/report.pptx",
  "map_path": "maps/index.html"
}
```

Entries are automatically sorted by timestamp (most recent first).

## ðŸ”§ Integration with AGENTE_D

The webroot is designed to work seamlessly with AGENTE_D's tools:

### `update_registry_direct` Tool

Located at: `AGENTE_D/tool/update_registry_direct_tool.py`

**What it does:**
- Copies PowerPoint from source to `webroot/reports/`
- Copies complete map with all assets to `webroot/maps/`:
  - `index.html` (map structure)
  - `styles.css` (map styles)
  - `app.js` (map logic)
  - `backend/incidents_data.json` (incident data)
- Updates `data/registry.json` with new entry
- Thread-safe atomic operations

**Advantages:**
- âœ… No Flask server required
- âœ… No HTTP timeouts
- âœ… Faster execution (direct file I/O)
- âœ… Each map is self-contained and preserves historical data
- âœ… Frontend auto-refresh picks up changes within 30s

## ðŸŒˆ Theme Colors

```css
--bg-primary: #050a0f        /* Main background */
--bg-secondary: #0d1117      /* Cards and boxes */
--green-primary: #10b981     /* Primary accent */
--cyan-primary: #22d3ee      /* Secondary accent */
```

---

**Last Updated:** 2025-12-02
**Version:** 2.0 (Direct File Integration with Self-Contained Maps)
